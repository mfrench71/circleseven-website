<link rel="stylesheet" href="{{ '/assets/css/menu.css' | relative_url }}">

<header class="site-header" role="banner">
  <div class="wrapper">
    <a class="site-title" rel="author" href="{{ "/" | relative_url }}">{{ site.title | escape }}</a>

    <nav class="site-nav" aria-label="Main navigation">
      <!-- Desktop Navigation -->
      <ul class="nav-list">
        <li class="nav-item">
          <a class="nav-link" href="{{ "/" | relative_url }}">Home</a>
        </li>

        <!-- Digital Art and Technology Mega Menu -->
        <li class="nav-item has-dropdown">
          <a class="nav-link" href="{{ site.baseurl }}/category/digital-art-and-technology/">Digital Art & Technology</a>
          <div class="mega-menu">
            <div class="mega-menu-content">
              <div class="mega-menu-section">
                <h3>Year 1 Modules</h3>
                <ul class="mega-menu-links">
                  {% assign dat_year1 = "DAT401 - Strategies for Digital Art and Technology,DAT402 - Digital Culture,DAT403 - Digital Media Design,DAT404 - Web Technologies,DAT405 - Creative Coding,DAT406 - Digital Making" | split: "," %}
                  {% for module_name in dat_year1 %}
                    {% for category in site.categories %}
                      {% if category[0] == module_name %}
                        <li>
                          <a href="{{ site.baseurl }}/category/{{ category[0] | slugify }}/">
                            {{ category[0] }}
                            <span class="post-count">{{ category[1] | size }}</span>
                          </a>
                        </li>
                      {% endif %}
                    {% endfor %}
                  {% endfor %}
                </ul>
              </div>

              <div class="mega-menu-section">
                <h3>Year 2 Modules</h3>
                <ul class="mega-menu-links">
                  {% assign dat_year2 = "DAT501 - Strategies for Digital Art and Technology,DAT503 - Reflexive Design,DAT504 - Advanced Web Technologies,DAT505 - Advanced Creative Coding,DAT506 - Emerging Technologies,INDE601 - Netscapes" | split: "," %}
                  {% for module_name in dat_year2 %}
                    {% for category in site.categories %}
                      {% if category[0] == module_name %}
                        <li>
                          <a href="{{ site.baseurl }}/category/{{ category[0] | slugify }}/">
                            {{ category[0] }}
                            <span class="post-count">{{ category[1] | size }}</span>
                          </a>
                        </li>
                      {% endif %}
                    {% endfor %}
                  {% endfor %}
                </ul>
              </div>

              <div class="mega-menu-section">
                <h3>Year 3 Modules</h3>
                <ul class="mega-menu-links">
                  {% assign dat_year3 = "DAT601 - Realtime,DAT602 - Everyware,DAT612 - Final Year Project,DAT613 - Dissertation" | split: "," %}
                  {% for module_name in dat_year3 %}
                    {% for category in site.categories %}
                      {% if category[0] == module_name %}
                        <li>
                          <a href="{{ site.baseurl }}/category/{{ category[0] | slugify }}/">
                            {{ category[0] }}
                            <span class="post-count">{{ category[1] | size }}</span>
                          </a>
                        </li>
                      {% endif %}
                    {% endfor %}
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </li>

        <!-- Projects Mega Menu -->
        <li class="nav-item has-dropdown">
          <a class="nav-link" href="{{ site.baseurl }}/category/projects/">Projects</a>
          <div class="mega-menu">
            <div class="mega-menu-content">
              <div class="mega-menu-section">
                <h3>Project Categories</h3>
                <ul class="mega-menu-links">
                  {% assign project_cats = "Photography,Motion Graphics,Retro Computing" | split: "," %}
                  {% for project_name in project_cats %}
                    {% for category in site.categories %}
                      {% if category[0] == project_name %}
                        <li>
                          <a href="{{ site.baseurl }}/category/{{ category[0] | slugify }}/">
                            {{ category[0] }}
                            <span class="post-count">{{ category[1] | size }}</span>
                          </a>
                        </li>
                      {% endif %}
                    {% endfor %}
                  {% endfor %}
                </ul>
              </div>
            </div>
          </div>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="{{ site.baseurl }}/categories/">Categories</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="{{ site.baseurl }}/search/">Search</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="{{ site.baseurl }}/about/">About</a>
        </li>
      </ul>

      <!-- Desktop Search Box -->
      <form action="{{ site.baseurl }}/search/" method="get" class="nav-search">
        <input type="text" name="q" placeholder="Search..." aria-label="Search">
      </form>

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
        <span class="hamburger"></span>
      </button>
    </nav>
  </div>
</header>

<!-- Mobile Drawer Overlay -->
<div class="mobile-drawer-overlay"></div>

<!-- Mobile Drawer -->
<div class="mobile-drawer">
  <div class="mobile-drawer-header">
    <h2>Menu</h2>
    <button class="mobile-drawer-close" aria-label="Close menu">&times;</button>
  </div>

  <!-- Mobile Search -->
  <div class="mobile-search">
    <form action="{{ site.baseurl }}/search/" method="get">
      <input type="text" name="q" placeholder="Search..." aria-label="Search">
    </form>
  </div>

  <!-- Mobile Navigation -->
  <ul class="mobile-nav-list">
    <li class="mobile-nav-item">
      <a class="mobile-nav-link" href="{{ "/" | relative_url }}">Home</a>
    </li>

    <!-- Digital Art & Technology Accordion -->
    <li class="mobile-nav-item">
      <button class="mobile-accordion-toggle" aria-expanded="false">
        Digital Art & Technology
      </button>
      <div class="mobile-accordion-content">
        <ul class="mobile-accordion-links">
          <li><a href="{{ site.baseurl }}/category/digital-art-and-technology/">View All</a></li>
          {% assign all_dat = "DAT401 - Strategies for Digital Art and Technology,DAT402 - Digital Culture,DAT403 - Digital Media Design,DAT404 - Web Technologies,DAT405 - Creative Coding,DAT406 - Digital Making,DAT501 - Strategies for Digital Art and Technology,DAT503 - Reflexive Design,DAT504 - Advanced Web Technologies,DAT505 - Advanced Creative Coding,DAT506 - Emerging Technologies,DAT601 - Realtime,DAT602 - Everyware,DAT612 - Final Year Project,DAT613 - Dissertation,INDE601 - Netscapes" | split: "," %}
          {% for module_name in all_dat %}
            {% for category in site.categories %}
              {% if category[0] == module_name %}
                <li>
                  <a href="{{ site.baseurl }}/category/{{ category[0] | slugify }}/">
                    {{ category[0] }} ({{ category[1] | size }})
                  </a>
                </li>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    </li>

    <!-- Projects Accordion -->
    <li class="mobile-nav-item">
      <button class="mobile-accordion-toggle" aria-expanded="false">
        Projects
      </button>
      <div class="mobile-accordion-content">
        <ul class="mobile-accordion-links">
          <li><a href="{{ site.baseurl }}/category/projects/">View All Projects</a></li>
          {% assign project_cats = "Photography,Motion Graphics,Retro Computing" | split: "," %}
          {% for project_name in project_cats %}
            {% for category in site.categories %}
              {% if category[0] == project_name %}
                <li>
                  <a href="{{ site.baseurl }}/category/{{ category[0] | slugify }}/">
                    {{ category[0] }} ({{ category[1] | size }})
                  </a>
                </li>
              {% endif %}
            {% endfor %}
          {% endfor %}
        </ul>
      </div>
    </li>

    <li class="mobile-nav-item">
      <a class="mobile-nav-link" href="{{ site.baseurl }}/categories/">All Categories</a>
    </li>

    <li class="mobile-nav-item">
      <a class="mobile-nav-link" href="{{ site.baseurl }}/search/">Search</a>
    </li>

    <li class="mobile-nav-item">
      <a class="mobile-nav-link" href="{{ site.baseurl }}/about/">About</a>
    </li>
  </ul>
</div>

<script src="{{ '/assets/js/menu.js' | relative_url }}"></script>
