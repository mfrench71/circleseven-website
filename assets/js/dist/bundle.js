(()=>{var y=(c,l)=>()=>(c&&(l=c(c=0)),l);var k={};var v=y(()=>{(function(){"use strict";let c={rootMargin:"200px",threshold:.01};function l(){let n=document.querySelectorAll(".post-card");if(n.length)if("IntersectionObserver"in window){let t=new IntersectionObserver(s,c);n.forEach(e=>{e.classList.add("lazy-card"),t.observe(e)})}else n.forEach(t=>{t.classList.add("lazy-card-loaded")})}function s(n,t){n.forEach(e=>{if(e.isIntersecting){let o=e.target;u(o),t.unobserve(o)}})}function u(n){n.classList.remove("lazy-card"),n.classList.add("lazy-card-loaded")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})()});var q={};var h=y(()=>{(function(){"use strict";let c={rootMargin:"400px",threshold:.01};function l(){let t=document.querySelectorAll(".gallery, .wp-block-gallery");if(t.length){if(!("IntersectionObserver"in window)){console.log("[LazyGallery] IntersectionObserver not supported, using native lazy loading");return}console.log(`[LazyGallery] Initializing lazy loading for ${t.length} galleries`),t.forEach(e=>{let o=e.querySelectorAll("img");console.log(`[LazyGallery] Processing ${o.length} images in gallery`),o.forEach(r=>{if(r.hasAttribute("data-lazy-processed"))return;let d=r.getAttribute("src"),a=r.getAttribute("srcset");if(d){r.setAttribute("data-src",d);let f=n(d);r.setAttribute("src",f),a&&(r.setAttribute("data-srcset",a),r.removeAttribute("srcset")),r.classList.add("lazy-gallery-image"),r.setAttribute("data-lazy-processed","true")}});let i=new IntersectionObserver(s,c);o.forEach(r=>{r.hasAttribute("data-lazy-processed")&&i.observe(r)})})}}function s(t,e){t.forEach(o=>{o.isIntersecting&&(u(o.target),e.unobserve(o.target))})}function u(t){let e=t.getAttribute("data-src"),o=t.getAttribute("data-srcset");if(!e)return;let i=new Image;i.onload=function(){o&&t.setAttribute("srcset",o),t.setAttribute("src",e),t.classList.add("loaded"),t.classList.remove("lazy-gallery-image"),t.removeAttribute("data-src"),t.removeAttribute("data-srcset")},i.onerror=function(){console.error("[LazyGallery] Failed to load image:",e),t.classList.remove("lazy-gallery-image")},o&&(i.srcset=o),i.src=e}function n(t){return t.includes("cloudinary.com")&&t.includes("/upload/")?t.replace(/\/upload\/[^/]+\//,"/upload/q_auto:low,w_50,e_blur:1000,f_auto/"):t}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l(),"MutationObserver"in window&&new MutationObserver(function(e){e.forEach(function(o){o.addedNodes.length&&o.addedNodes.forEach(function(i){i.nodeType===1&&(i.matches(".gallery, .wp-block-gallery")||i.querySelector(".gallery, .wp-block-gallery"))&&l()})})}).observe(document.body,{childList:!0,subtree:!0})})()});var x={};var w=y(()=>{(function(){"use strict";function c(){let s=document.querySelector(".post-content, .page-content");s&&l(s)}function l(s){let u=s.querySelectorAll('a[href*="/wp-content"], a[href*="site.baseurl"]'),n=s.querySelectorAll('img[src*="/wp-content"], img[src*="circleseven.co.uk"]');u.forEach(t=>{let e=t.getAttribute("href");e=e.replace(/\{\{\s*site\.baseurl\s*\}\}\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e=e.replace(/\/circleseven-website\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e.includes("/wp-content")&&!e.startsWith("http")&&(e="https://www.circleseven.co.uk"+e.replace(/^.*?(\/wp-content)/,"$1")),t.setAttribute("href",e)}),n.forEach(t=>{let e=t.getAttribute("src");e.includes("circleseven.co.uk")||(e=e.replace(/\{\{\s*site\.baseurl\s*\}\}\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e=e.replace(/\/circleseven-website\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e.includes("/wp-content")&&!e.startsWith("http")&&(e="https://www.circleseven.co.uk"+e.replace(/^.*?(\/wp-content)/,"$1")),t.setAttribute("src",e))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c()})()});var C={};var E=y(()=>{(function(){"use strict";let c=!1,l=null;function s(){if(typeof GLightbox>"u"||c)return;console.log("[Lightbox] Initializing GLightbox"),document.querySelectorAll("figure a").forEach(o=>{let i=o.querySelector("img"),r=o.closest("figure").querySelector("iframe, video");if(i&&!r){o.classList.add("glightbox"),o.setAttribute("data-type","image");let a=o.querySelector("img").getAttribute("data-full-src");a&&o.setAttribute("href",a)}}),n(),l=GLightbox({selector:".glightbox",touchNavigation:!0,loop:!0,closeOnOutsideClick:!0,keyboardNavigation:!0,skin:"clean",width:"95vw",height:"90vh",zoomable:!1,draggable:!1,onOpen:function(){document.body.classList.add("glightbox-open")},onClose:function(){document.body.classList.remove("glightbox-open")}}),c=!0,console.log("[Lightbox] Initialization complete")}function u(){let e=document.querySelectorAll(".gallery, .wp-block-gallery");if(!e.length){s();return}if(document.addEventListener("click",function o(i){i.target.closest(".gallery figure a, figure a")&&(console.log("[Lightbox] First gallery click detected, initializing..."),c||(i.preventDefault(),s(),setTimeout(()=>{i.target.closest("a").click()},100),document.removeEventListener("click",o)))}),"IntersectionObserver"in window){let o=new IntersectionObserver(i=>{i.forEach(r=>{r.isIntersecting&&!c&&(console.log("[Lightbox] Gallery in viewport, initializing..."),s(),o.disconnect())})},{rootMargin:"200px"});e.forEach(i=>{o.observe(i)})}else s()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u();function n(){let e=document.querySelectorAll(".gallery, .wp-block-gallery"),o=0;e.forEach(r=>{let d=r.querySelectorAll("figure a"),a=[];d.forEach(f=>{let g=f.querySelector("img"),p=f.closest("figure").querySelector("iframe, video");g&&!p&&a.push(f)}),a.length>0&&(a.forEach(f=>{f.setAttribute("data-gallery",`gallery-${o}`);let g=f.closest("figure");if(g){let p=g.querySelector("figcaption"),m=f.querySelector("img");p&&p.textContent.trim()?f.setAttribute("data-glightbox",`description: ${p.textContent.trim()}`):m&&m.alt&&f.setAttribute("data-glightbox",`description: ${m.alt}`)}}),o++)}),document.querySelectorAll(".post-content, .page-content, article").forEach(r=>{r.querySelectorAll("figure:not(.gallery figure):not(.wp-block-gallery figure) a").forEach(a=>{let f=a.querySelector("img"),g=a.closest("figure").querySelector("iframe, video");if(f&&!g){a.setAttribute("data-gallery",`standalone-${o}`);let p=a.closest("figure");if(p){let m=p.querySelector("figcaption"),b=a.querySelector("img");m&&m.textContent.trim()?a.setAttribute("data-glightbox",`description: ${m.textContent.trim()}`):b&&b.alt&&a.setAttribute("data-glightbox",`description: ${b.alt}`)}o++}})})}let t=new MutationObserver(function(e){e.forEach(function(o){o.addedNodes.length&&o.addedNodes.forEach(function(i){if(i.nodeType===1){let r=i.querySelectorAll?i.querySelectorAll("figure a"):[],d=[];r.forEach(a=>{let f=a.querySelector("img"),g=a.closest("figure").querySelector("iframe, video");f&&!g&&d.push(a)}),d.length>0&&(d.forEach(a=>{a.classList.add("glightbox")}),setTimeout(()=>{n(),s()},100))}})})});if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".post-grid, .post-content, .page-content");e&&t.observe(e,{childList:!0,subtree:!0})});else{let e=document.querySelector(".post-grid, .post-content, .page-content");e&&t.observe(e,{childList:!0,subtree:!0})}})()});var I={};var S=y(()=>{(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre code").forEach(function(l){let s=l.parentElement;if(s.parentElement.classList.contains("code-block-wrapper"))return;let u=document.createElement("div");u.className="code-block-wrapper",s.parentNode.insertBefore(u,s),u.appendChild(s);let n=document.createElement("button");n.className="copy-code-button",n.textContent="Copy",n.setAttribute("aria-label","Copy code to clipboard"),n.addEventListener("click",function(){let t=l.textContent;navigator.clipboard.writeText(t).then(function(){n.textContent="Copied!",n.classList.add("copied"),setTimeout(function(){n.textContent="Copy",n.classList.remove("copied")},2e3)}).catch(function(e){n.textContent="Error",setTimeout(function(){n.textContent="Copy"},2e3)})}),u.appendChild(n)})})})()});var z={};var A=y(()=>{(function(){"use strict";document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c();function c(){l(),u()}function l(){document.querySelectorAll('iframe[src*="sketchfab.com"]').forEach(function(e){if(e.parentElement.classList.contains("sketchfab-embed"))return;let o=document.createElement("div");o.className="sketchfab-embed",e.parentNode.insertBefore(o,e),o.appendChild(e),e.removeAttribute("width"),e.removeAttribute("height")})}function s(){document.querySelectorAll(".wp-block-vimeo-create").forEach(function(e){let o=document.createElement("div");o.className="embed-container";let i=e.querySelector("iframe");i&&(e.parentNode.insertBefore(o,e),o.appendChild(i),e.remove())})}function u(){if(typeof L>"u"){window.addEventListener("load",u);return}document.querySelectorAll(".leaflet-map").forEach(function(e,o){let i=parseFloat(e.getAttribute("data-lat")),r=parseFloat(e.getAttribute("data-lng")),d=parseInt(e.getAttribute("data-zoom"));if(!i||!r||!d)return;let a="leaflet-map-"+o;e.id=a,setTimeout(function(){n(a,i,r,d)},100)})}function n(t,e,o,i){let r=document.getElementById(t);if(r)try{let d=L.map(t).setView([e,o],i);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(d),L.marker([e,o]).addTo(d).bindPopup("Location").openPopup(),setTimeout(function(){d.invalidateSize()},100)}catch{r.innerHTML='<div class="wordpress-embed-placeholder">Map could not be loaded</div>'}}})()});(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){c(),l(),u()});function c(){let t=document.querySelector(".mobile-menu-toggle"),e=document.querySelector(".mobile-drawer-overlay"),o=document.querySelector(".mobile-drawer"),i=document.querySelector(".mobile-drawer-close");if(!t||!e||!o)return;t.addEventListener("click",function(){t.classList.add("active"),e.classList.add("active"),o.classList.add("active"),document.body.style.overflow="hidden",s()});function r(){t.classList.remove("active"),e.classList.remove("active"),o.classList.remove("active"),document.body.style.overflow=""}i&&i.addEventListener("click",r),e.addEventListener("click",function(d){d.target===e&&r()}),document.addEventListener("keydown",function(d){d.key==="Escape"&&o.classList.contains("active")&&r()})}function l(){document.querySelectorAll(".has-dropdown").forEach(function(e){let o=e.querySelector(".nav-link");o&&o.addEventListener("click",function(i){"ontouchstart"in window&&(e.classList.contains("active")||(i.preventDefault(),document.querySelectorAll(".has-dropdown.active").forEach(function(r){r!==e&&r.classList.remove("active")}),e.classList.add("active")))})}),document.addEventListener("click",function(e){e.target.closest(".has-dropdown")||document.querySelectorAll(".has-dropdown.active").forEach(function(o){o.classList.remove("active")})})}function s(){document.querySelectorAll(".mobile-accordion-toggle").forEach(function(t){t.classList.remove("active"),t.nextElementSibling&&t.nextElementSibling.classList.remove("active")})}function u(){document.querySelectorAll(".mobile-accordion-toggle").forEach(function(e){e.addEventListener("click",function(){let o=this.nextElementSibling,i=this.classList.contains("active");document.querySelectorAll(".mobile-accordion-toggle").forEach(function(r){r.classList.remove("active"),r.nextElementSibling.classList.remove("active")}),i||(this.classList.add("active"),o.classList.add("active"))})})}let n;window.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(function(){if(window.innerWidth>900){let t=document.querySelector(".mobile-menu-toggle"),e=document.querySelector(".mobile-drawer-overlay"),o=document.querySelector(".mobile-drawer");t&&t.classList.remove("active"),e&&e.classList.remove("active"),o&&o.classList.remove("active"),document.body.style.overflow=""}},250)})})();(function(){"use strict";let c=document.createElement("button");c.id="back-to-top",c.setAttribute("aria-label","Back to top"),c.setAttribute("title","Back to top"),c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>',document.body.appendChild(c);function l(){window.pageYOffset>300?c.classList.add("visible"):c.classList.remove("visible")}function s(u){u.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",l,{passive:!0}),c.addEventListener("click",s),l()})();(function(){"use strict";function c(){document.querySelectorAll(".edit-post-link, .edit-card-link").forEach(t=>{t.style.display="none",t.classList.remove("edit-link-visible")})}c();function l(){if(localStorage.getItem("TEST_MODE")==="true"){s({email:"test@playwright.dev"});return}if(!window.netlifyIdentity)return;let n=netlifyIdentity.currentUser();s(n||null),netlifyIdentity.on("init",t=>{s(t)}),netlifyIdentity.on("login",t=>{s(t)}),netlifyIdentity.on("logout",()=>{s(null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(l,100)}):setTimeout(l,100);function s(n){document.querySelectorAll(".edit-post-link, .edit-card-link").forEach(e=>{n?(e.style.display="",e.classList.add("edit-link-visible")):(e.style.display="none",e.classList.remove("edit-link-visible"))})}function u(n){let t=n.replace(/^\d{4}-\d{2}-\d{2}-/,"");return`/admin/#/collections/blog/entries/${n}`}window.getEditUrl=u})();document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".post-grid")&&Promise.resolve().then(()=>(v(),k)),document.querySelector(".gallery, .wp-block-gallery")&&Promise.all([Promise.resolve().then(()=>(h(),q)),Promise.resolve().then(()=>(w(),x)),Promise.resolve().then(()=>(E(),C))]),document.querySelector("pre code")&&Promise.resolve().then(()=>(S(),I)),document.querySelector(".post-content iframe, .post-content video, .page-content iframe, .page-content video, .leaflet-map")&&Promise.resolve().then(()=>(A(),z))});})();
