(()=>{var y=(s,l)=>()=>(s&&(l=s(s=0)),l);var k={};var v=y(()=>{(function(){"use strict";let s={rootMargin:"200px",threshold:.01};function l(){let n=document.querySelectorAll(".post-card");if(n.length)if("IntersectionObserver"in window){let t=new IntersectionObserver(c,s);n.forEach(e=>{e.classList.add("lazy-card"),t.observe(e)})}else n.forEach(t=>{t.classList.add("lazy-card-loaded")})}function c(n,t){n.forEach(e=>{if(e.isIntersecting){let o=e.target;d(o),t.unobserve(o)}})}function d(n){n.classList.remove("lazy-card"),n.classList.add("lazy-card-loaded")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l()})()});var q={};var h=y(()=>{(function(){"use strict";let s={rootMargin:"400px",threshold:.01};function l(){let t=document.querySelectorAll(".gallery, .wp-block-gallery");if(t.length){if(!("IntersectionObserver"in window)){console.log("[LazyGallery] IntersectionObserver not supported, using native lazy loading");return}console.log(`[LazyGallery] Initializing lazy loading for ${t.length} galleries`),t.forEach(e=>{let o=e.querySelectorAll("img");console.log(`[LazyGallery] Processing ${o.length} images in gallery`),o.forEach(i=>{if(i.hasAttribute("data-lazy-processed"))return;let u=i.getAttribute("src"),a=i.getAttribute("srcset");if(u){i.setAttribute("data-src",u);let f=n(u);i.setAttribute("src",f),a&&(i.setAttribute("data-srcset",a),i.removeAttribute("srcset")),i.classList.add("lazy-gallery-image"),i.setAttribute("data-lazy-processed","true")}});let r=new IntersectionObserver(c,s);o.forEach(i=>{i.hasAttribute("data-lazy-processed")&&r.observe(i)})})}}function c(t,e){t.forEach(o=>{o.isIntersecting&&(d(o.target),e.unobserve(o.target))})}function d(t){let e=t.getAttribute("data-src"),o=t.getAttribute("data-srcset");if(!e)return;let r=new Image;r.onload=function(){o&&t.setAttribute("srcset",o),t.setAttribute("src",e),t.classList.add("loaded"),t.classList.remove("lazy-gallery-image"),t.removeAttribute("data-src"),t.removeAttribute("data-srcset")},r.onerror=function(){console.error("[LazyGallery] Failed to load image:",e),t.classList.remove("lazy-gallery-image")},o&&(r.srcset=o),r.src=e}function n(t){return t.includes("cloudinary.com")&&t.includes("/upload/")?t.replace(/\/upload\/[^/]+\//,"/upload/q_auto:low,w_50,e_blur:1000,f_auto/"):t}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l(),"MutationObserver"in window&&new MutationObserver(function(e){e.forEach(function(o){o.addedNodes.length&&o.addedNodes.forEach(function(r){r.nodeType===1&&(r.matches(".gallery, .wp-block-gallery")||r.querySelector(".gallery, .wp-block-gallery"))&&l()})})}).observe(document.body,{childList:!0,subtree:!0})})()});var x={};var w=y(()=>{(function(){"use strict";function s(){let c=document.querySelector(".post-content, .page-content");c&&l(c)}function l(c){let d=c.querySelectorAll('a[href*="/wp-content"], a[href*="site.baseurl"]'),n=c.querySelectorAll('img[src*="/wp-content"], img[src*="circleseven.co.uk"]');d.forEach(t=>{let e=t.getAttribute("href");e=e.replace(/\{\{\s*site\.baseurl\s*\}\}\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e=e.replace(/\/circleseven-website\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e.includes("/wp-content")&&!e.startsWith("http")&&(e="https://www.circleseven.co.uk"+e.replace(/^.*?(\/wp-content)/,"$1")),t.setAttribute("href",e)}),n.forEach(t=>{let e=t.getAttribute("src");e.includes("circleseven.co.uk")||(e=e.replace(/\{\{\s*site\.baseurl\s*\}\}\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e=e.replace(/\/circleseven-website\/wp-content/,"https://www.circleseven.co.uk/wp-content"),e.includes("/wp-content")&&!e.startsWith("http")&&(e="https://www.circleseven.co.uk"+e.replace(/^.*?(\/wp-content)/,"$1")),t.setAttribute("src",e))})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()})()});var C={};var E=y(()=>{(function(){"use strict";let s=!1,l=null;function c(){if(typeof GLightbox>"u"||s)return;console.log("[Lightbox] Initializing GLightbox"),document.querySelectorAll("figure a").forEach(o=>{let r=o.querySelector("img"),i=o.closest("figure").querySelector("iframe, video");if(r&&!i){o.classList.add("glightbox"),o.setAttribute("data-type","image");let a=o.querySelector("img").getAttribute("data-full-src");a&&o.setAttribute("href",a)}}),n(),l=GLightbox({selector:".glightbox",touchNavigation:!0,loop:!0,closeOnOutsideClick:!0,keyboardNavigation:!0,skin:"clean",width:"95vw",height:"90vh",zoomable:!1,draggable:!1,onOpen:function(){document.body.classList.add("glightbox-open")},onClose:function(){document.body.classList.remove("glightbox-open")}}),s=!0,console.log("[Lightbox] Initialization complete")}function d(){let e=document.querySelectorAll(".gallery, .wp-block-gallery");if(!e.length){c();return}if(document.addEventListener("click",function o(r){r.target.closest(".gallery figure a, figure a")&&(console.log("[Lightbox] First gallery click detected, initializing..."),s||(r.preventDefault(),c(),setTimeout(()=>{r.target.closest("a").click()},100),document.removeEventListener("click",o)))}),"IntersectionObserver"in window){let o=new IntersectionObserver(r=>{r.forEach(i=>{i.isIntersecting&&!s&&(console.log("[Lightbox] Gallery in viewport, initializing..."),c(),o.disconnect())})},{rootMargin:"200px"});e.forEach(r=>{o.observe(r)})}else c()}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",d):d();function n(){let e=document.querySelectorAll(".gallery, .wp-block-gallery"),o=0;e.forEach(i=>{let u=i.querySelectorAll("figure a"),a=[];u.forEach(f=>{let g=f.querySelector("img"),p=f.closest("figure").querySelector("iframe, video");g&&!p&&a.push(f)}),a.length>0&&(a.forEach(f=>{f.setAttribute("data-gallery",`gallery-${o}`);let g=f.closest("figure");if(g){let p=g.querySelector("figcaption"),m=f.querySelector("img");p&&p.textContent.trim()?f.setAttribute("data-glightbox",`description: ${p.textContent.trim()}`):m&&m.alt&&f.setAttribute("data-glightbox",`description: ${m.alt}`)}}),o++)}),document.querySelectorAll(".post-content, .page-content, article").forEach(i=>{i.querySelectorAll("figure:not(.gallery figure):not(.wp-block-gallery figure) a").forEach(a=>{let f=a.querySelector("img"),g=a.closest("figure").querySelector("iframe, video");if(f&&!g){a.setAttribute("data-gallery",`standalone-${o}`);let p=a.closest("figure");if(p){let m=p.querySelector("figcaption"),b=a.querySelector("img");m&&m.textContent.trim()?a.setAttribute("data-glightbox",`description: ${m.textContent.trim()}`):b&&b.alt&&a.setAttribute("data-glightbox",`description: ${b.alt}`)}o++}})})}let t=new MutationObserver(function(e){e.forEach(function(o){o.addedNodes.length&&o.addedNodes.forEach(function(r){if(r.nodeType===1){let i=r.querySelectorAll?r.querySelectorAll("figure a"):[],u=[];i.forEach(a=>{let f=a.querySelector("img"),g=a.closest("figure").querySelector("iframe, video");f&&!g&&u.push(a)}),u.length>0&&(u.forEach(a=>{a.classList.add("glightbox")}),setTimeout(()=>{n(),c()},100))}})})});if(document.readyState==="loading")document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector(".post-grid, .post-content, .page-content");e&&t.observe(e,{childList:!0,subtree:!0})});else{let e=document.querySelector(".post-grid, .post-content, .page-content");e&&t.observe(e,{childList:!0,subtree:!0})}})()});var I={};var S=y(()=>{(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll("pre code").forEach(function(l){let c=l.parentElement;if(c.parentElement.classList.contains("code-block-wrapper"))return;let d=document.createElement("div");d.className="code-block-wrapper",c.parentNode.insertBefore(d,c),d.appendChild(c);let n=document.createElement("button");n.className="copy-code-button",n.textContent="Copy",n.setAttribute("aria-label","Copy code to clipboard"),n.addEventListener("click",function(){let t=l.textContent;navigator.clipboard.writeText(t).then(function(){n.textContent="Copied!",n.classList.add("copied"),setTimeout(function(){n.textContent="Copy",n.classList.remove("copied")},2e3)}).catch(function(e){n.textContent="Error",setTimeout(function(){n.textContent="Copy"},2e3)})}),d.appendChild(n)})})})()});var z={};var A=y(()=>{(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){s(),c()});function s(){document.querySelectorAll('iframe[src*="sketchfab.com"]').forEach(function(t){if(t.parentElement.classList.contains("sketchfab-embed"))return;let e=document.createElement("div");e.className="sketchfab-embed",t.parentNode.insertBefore(e,t),e.appendChild(t),t.removeAttribute("width"),t.removeAttribute("height")})}function l(){document.querySelectorAll(".wp-block-vimeo-create").forEach(function(t){let e=document.createElement("div");e.className="embed-container";let o=t.querySelector("iframe");o&&(t.parentNode.insertBefore(e,t),e.appendChild(o),t.remove())})}function c(){if(typeof L>"u")return;document.querySelectorAll(".leaflet-map").forEach(function(t,e){let o=parseFloat(t.getAttribute("data-lat")),r=parseFloat(t.getAttribute("data-lng")),i=parseInt(t.getAttribute("data-zoom"));if(!o||!r||!i)return;let u="leaflet-map-"+e;t.id=u,setTimeout(function(){d(u,o,r,i)},100)})}function d(n,t,e,o){let r=document.getElementById(n);if(r)try{let i=L.map(n).setView([t,e],o);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(i),L.marker([t,e]).addTo(i).bindPopup("Location").openPopup(),setTimeout(function(){i.invalidateSize()},100)}catch{r.innerHTML='<div class="wordpress-embed-placeholder">Map could not be loaded</div>'}}})()});(function(){"use strict";document.addEventListener("DOMContentLoaded",function(){s(),l(),d()});function s(){let t=document.querySelector(".mobile-menu-toggle"),e=document.querySelector(".mobile-drawer-overlay"),o=document.querySelector(".mobile-drawer"),r=document.querySelector(".mobile-drawer-close");if(!t||!e||!o)return;t.addEventListener("click",function(){t.classList.add("active"),e.classList.add("active"),o.classList.add("active"),document.body.style.overflow="hidden",c()});function i(){t.classList.remove("active"),e.classList.remove("active"),o.classList.remove("active"),document.body.style.overflow=""}r&&r.addEventListener("click",i),e.addEventListener("click",function(u){u.target===e&&i()}),document.addEventListener("keydown",function(u){u.key==="Escape"&&o.classList.contains("active")&&i()})}function l(){document.querySelectorAll(".has-dropdown").forEach(function(e){let o=e.querySelector(".nav-link");o&&o.addEventListener("click",function(r){"ontouchstart"in window&&(e.classList.contains("active")||(r.preventDefault(),document.querySelectorAll(".has-dropdown.active").forEach(function(i){i!==e&&i.classList.remove("active")}),e.classList.add("active")))})}),document.addEventListener("click",function(e){e.target.closest(".has-dropdown")||document.querySelectorAll(".has-dropdown.active").forEach(function(o){o.classList.remove("active")})})}function c(){document.querySelectorAll(".mobile-accordion-toggle").forEach(function(t){t.classList.remove("active"),t.nextElementSibling&&t.nextElementSibling.classList.remove("active")})}function d(){document.querySelectorAll(".mobile-accordion-toggle").forEach(function(e){e.addEventListener("click",function(){let o=this.nextElementSibling,r=this.classList.contains("active");document.querySelectorAll(".mobile-accordion-toggle").forEach(function(i){i.classList.remove("active"),i.nextElementSibling.classList.remove("active")}),r||(this.classList.add("active"),o.classList.add("active"))})})}let n;window.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(function(){if(window.innerWidth>900){let t=document.querySelector(".mobile-menu-toggle"),e=document.querySelector(".mobile-drawer-overlay"),o=document.querySelector(".mobile-drawer");t&&t.classList.remove("active"),e&&e.classList.remove("active"),o&&o.classList.remove("active"),document.body.style.overflow=""}},250)})})();(function(){"use strict";let s=document.createElement("button");s.id="back-to-top",s.setAttribute("aria-label","Back to top"),s.setAttribute("title","Back to top"),s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>',document.body.appendChild(s);function l(){window.pageYOffset>300?s.classList.add("visible"):s.classList.remove("visible")}function c(d){d.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",l,{passive:!0}),s.addEventListener("click",c),l()})();(function(){"use strict";function s(){document.querySelectorAll(".edit-post-link, .edit-card-link").forEach(t=>{t.style.display="none",t.classList.remove("edit-link-visible")})}s();function l(){if(localStorage.getItem("TEST_MODE")==="true"){c({email:"test@playwright.dev"});return}if(!window.netlifyIdentity)return;let n=netlifyIdentity.currentUser();c(n||null),netlifyIdentity.on("init",t=>{c(t)}),netlifyIdentity.on("login",t=>{c(t)}),netlifyIdentity.on("logout",()=>{c(null)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(l,100)}):setTimeout(l,100);function c(n){document.querySelectorAll(".edit-post-link, .edit-card-link").forEach(e=>{n?(e.style.display="",e.classList.add("edit-link-visible")):(e.style.display="none",e.classList.remove("edit-link-visible"))})}function d(n){let t=n.replace(/^\d{4}-\d{2}-\d{2}-/,"");return`/admin/#/collections/blog/entries/${n}`}window.getEditUrl=d})();document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".post-grid")&&Promise.resolve().then(()=>(v(),k)),document.querySelector(".gallery, .wp-block-gallery")&&Promise.all([Promise.resolve().then(()=>(h(),q)),Promise.resolve().then(()=>(w(),x)),Promise.resolve().then(()=>(E(),C))]),document.querySelector("pre code")&&Promise.resolve().then(()=>(S(),I)),document.querySelector(".post-content iframe, .post-content video, .page-content iframe, .page-content video")&&Promise.resolve().then(()=>(A(),z))});})();
